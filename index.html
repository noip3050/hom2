<!DOCTYPE html>
<html>
  <head>
    <title>تحديد موقعي داخل منزل 3D</title>
    <script src="https://aframe.io/releases/1.4.0/aframe.min.js"></script>
    <style>
      body {
        margin: 0;
        overflow: hidden;
      }
      #instructions {
        position: absolute;
        top: 10px;
        left: 10px;
        background: rgba(0, 0, 0, 0.7);
        color: white;
        padding: 10px;
        font-family: Arial, sans-serif;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <div id="instructions">
      <h3>تعليمات:</h3>
      <p>حرك الجهاز أو امشي لتتحرك الكاميرا داخل المنزل.</p>
    </div>
    <a-scene>
      <!-- الكاميرا -->
      <a-entity id="camera" camera position="0 1.6 0" look-controls></a-entity>

      <!-- تصميم الجدران والغرف -->
      <a-box position="0 1 0" depth="20" height="2" width="10" color="#f5f5f5"></a-box>
      <a-box position="0 1 -10" depth="2" height="2" width="10" color="#cccccc"></a-box>
      <a-box position="-5 1 -5" depth="20" height="2" width="2" color="#999999"></a-box>
      <a-box position="5 1 -5" depth="20" height="2" width="2" color="#999999"></a-box>

      <!-- إضافة الإضاءة -->
      <a-light type="ambient" color="#ffffff"></a-light>
      <a-light type="point" position="2 4 -3" intensity="0.8"></a-light>
    </a-scene>

    <script>
      // استخدام الجيروسكوب والتسارع
      let position = { x: 0, y: 1.6, z: 0 };

      if (window.DeviceMotionEvent) {
        window.addEventListener("devicemotion", (event) => {
          const acceleration = event.accelerationIncludingGravity;
          if (acceleration) {
            // حساب الحركة بناءً على التسارع
            position.z -= acceleration.z * 0.01; // التحرك للأمام/الخلف
            position.x -= acceleration.x * 0.01; // التحرك يمين/يسار

            // تحديث موقع الكاميرا
            const camera = document.getElementById("camera");
            camera.setAttribute("position", `${position.x} ${position.y} ${position.z}`);
          }
        });
      } else {
        alert("جهازك لا يدعم قراءة الحساسات.");
      }
    </script>
  </body>
</html>
